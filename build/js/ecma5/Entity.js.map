{"version":3,"sources":["js/Entity.js"],"names":[],"mappings":"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","file":"js/Entity.js","sourcesContent":["import $ from \"jquery\";\nimport jqueryEasing from \"jqueryEasing\";\nimport Engine from \"Engine\";\nimport \"css!/css/Entity.css\";\n\nvar transitionEnd = 'webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend'\nvar animationEnd = 'webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend';\nvar keyMappings = {\n\t32: \"SPACEBAR\",\n\t37: \"LEFT\",\n\t39: \"RIGHT\",\n\t38: \"UP\",\n\t40: \"DOWN\"\n};\nvar directions = {\n\tNONE: \"NONE\",\n\tUP: \"UP\",\n\tDOWN: \"DOWN\",\n\tLEFT: \"LEFT\",\n\tRIGHT: \"RIGHT\"\n};\n\n\nclass Entity {\n\tstatic get types() {\n\t\treturn {\n\t\t\tTYPE1: \"TYPE1\", // A primary element, will be position fixed\n\t\t\tTYPE2: \"TYPE2\" // A secondar element, will be position relative\n\t\t}\n\t}\n\n\tconstructor(options) {\n\t\tthis.direction = {\n\t\t\tx: directions.NONE,\n\t\t\ty: directions.NONE\n\t\t};\n\t\tthis.size = {\n\t\t\twidth: 30,\n\t\t\theight: 30\n\t\t};\n\t\tthis.el = null;\n\t\tthis.$el = $();\n\t\tthis.jumps = 0;\n\t\tthis.entType = Entity.types.TYPE1;\n\t\tthis.tagName = \"div\";\n\t\tthis.bindEvents();\n\t\tthis.ground = 194.5;\n\t\tthis.gravity = Engine.instance.gravity;\n\t\tthis.friction = Engine.instance.friction;\n\t\tthis.velocityY = 0.0;\n\t\tthis.velocityX = 0.0;\n\t\tObject.assign(this, options);\n\t\tEngine.instance.addEntity(this);\n\t}\n\n\tget direction(){\n\t\treturn this._direction;\n\t}\n\n\tset direction(value){\n\t\t\n\t\tvar actions = {\n\t\t\tUP: ()=>{\n\t\t\t\tthis.$el.removeClass('down').addClass('up');\n\t\t\t},\n\t\t\tDOWN: ()=>{\n\t\t\t\tthis.$el.removeClass('up').addClass('down');\n\t\t\t},\n\t\t\tLEFT: ()=>{\n\t\t\t\tthis.$el.removeClass('right').addClass('left');\t\n\t\t\t},\n\t\t\tRIGHT: ()=>{\n\t\t\t\tthis.$el.removeClass('left').addClass('right');\n\t\t\t},\n\t\t\tNONE: (axis)=>{\n\t\t\t\tif(axis == \"x\"){\n\t\t\t\t\tthis.$el && this.$el.removeClass('left right');\n\t\t\t\t}else{\n\t\t\t\t\tthis.$el && this.$el.removeClass('up down');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvalue.x && actions[value.x] && actions[value.x](\"x\");\n\t\tvalue.y && actions[value.y] && actions[value.y](\"y\"); \n\t\tthis._direction = value;\n\n\t}\n\n\tupdate() {\n\n\t\t(this.velocityY !== 0) && (this.velocityY += this.gravity);\n\t\t(this.velocityX !== 0) && (this.velocityX += this.friction);\n\n\t\tthis.positionY = this.positionY + this.velocityY;\n\t\tthis.positionX = (this.direction.x == directions.LEFT)?this.positionX + this.velocityX:this.positionX - this.velocityX;\n\n\t\tif(this.direction.x == directions.LEFT && this.velocityX > 0\n\t\t\t|| this.direction.x == directions.RIGHT && this.velocityX > 0){\n\t\t\tthis.direction.x = directions.NONE;\n\t\t\tthis.velocityX = 0;\n\n\t\t}\n\n\t\tif (this.positionY > this.ground) {\n\t\t\tthis.positionY = this.ground;\n\t\t\tthis.velocityY = 0;\n\t\t}\n\n\t}\n\n\tjump() {\n\t\tthis.jumps++;\n\t\tthis.velocityY = -4;\n\t}\n\n\tgoLeft() {\n\t\tthis.direction.x = directions.LEFT;\n\t\tthis.velocityX = -3.5;\n\t}\n\n\tgoRight() {\n\t\tthis.direction.x = directions.RIGHT;\n\t\tthis.velocityX = -3.5;\n\t}\n\n\tset isStationaryY(value) {\n\t\tthis._isStationaryY = value;\n\t\tif (this._isStationaryY) {\n\t\t\tthis.velocityY = 0;\n\t\t}\n\t}\n\n\tset velocityY(value) {\n\t\tthis._velocityY = value;\n\t}\n\n\tget velocityY() {\n\t\treturn this._velocityY;\n\t}\n\n\tget top() {\n\t\treturn this.$el.position().top;\n\t}\n\n\tget bottom() {\n\t\treturn this.positionY + this.height();\n\t}\n\n\tset positionX(value) {\n\t\tthis.$el.css({\n\t\t\tleft: value\n\t\t});\n\t}\n\n\tget positionX() {\n\t\treturn this.$el.position().left;\n\t}\n\n\tget positionY() {\n\t\treturn this.$el.position().top;\n\t}\n\n\tset positionY(value) {\n\t\tvar d = this.direction;\n\t\tif (value > this.positionY) {\n\t\t\td.y = directions.DOWN;\n\t\t} else if (value < this.positionY) {\n\t\t\td.y = directions.UP;\n\t\t} else {\n\t\t\td.y = directions.NONE;\n\t\t}\n\n\t\tthis.direction = d;\n\t\tthis.$el.css({\n\t\t\ttop: value\n\t\t});\n\t}\n\n\tbindEvents() { \n\t\t$(document).on('keydown.' + this.constructor.name, event => {\n\n\t\t\tconsole.log(event.keyCode);\n\n\t\t\tvar key = keyMappings[event.keyCode]\n\t\t\tvar actions = {\n\t\t\t\t\"LEFT\": () => {\n\t\t\t\t\tthis.goLeft();\n\t\t\t\t},\n\t\t\t\t\"RIGHT\": () => {\n\t\t\t\t\tthis.goRight();\n\t\t\t\t},\n\t\t\t\t\"UP\": () => {\n\t\t\t\t\tthis.jump();\n\t\t\t\t},\n\t\t\t\t\"SPACEBAR\": () => {\n\t\t\t\t\tthis.jump();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tactions[key] && actions[key]();\n\t\t});\n\t}\n\n\trender() {\n\t\treturn this;\n\t}\n\n\tset type(value) {\n\t\tthis._entType = value;\n\t}\n\n\tset tagName(value) {\n\t\tthis._tagName = value;\n\t\tthis.el = document.createElement(this._tagName);\n\t\tthis.el.className = this.constructor.name + \" \" + this.entType;\n\t\tthis.$el = $(this.el).width(this.size.width).height(this.size.height);\n\t}\n}\n\nexport default Entity;"]}